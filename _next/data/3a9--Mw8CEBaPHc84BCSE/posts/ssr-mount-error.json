{"pageProps":{"postData":{"id":"ssr-mount-error","contentHtml":"<h2>ğŸš¨ ë¬¸ì œìƒí™©</h2>\n<ul>\n<li>100ìœ¼ë¡œ ì˜¬ë ¤ë‘ì—ˆë˜ Heath Scoreê°€ ì–´ëŠ ìƒˆ 34ì ìœ¼ë¡œ ëš ë–¨ì–´ì ¸ë²„ë ¸ë‹¤ </li>\n</ul>\n<p><img src=\"https://github.com/ha3158987/hyuna-next.js-blog/assets/65105537/f4bc3bce-d34b-43ce-a8f1-909abfa1f163\" alt=\"image\"></p>\n<ul>\n<li>\n<p>ì„¤ìƒê°€ìƒìœ¼ë¡œ ìŠ¬ë™ ë“± ê¸°íƒ€ í”Œë«í¼ì—ì„œ ë§í¬ ê³µìœ  ì‹œ ë‚˜ì˜¤ë˜ ë©”íƒ€ ì •ë³´ë„ ì–¸ì œë¶€í„°ì¸ê°€ ë³´ì´ì§ˆ ì•Šê³  ìˆì—ˆë‹¤...</p>\n<p><strong>BEFORE</strong></p>\n<p><img src=\"https://github.com/ha3158987/hyuna-next.js-blog/assets/65105537/cefe4d92-a0f2-4f3e-8d94-f1fa78c0ac8a\" alt=\"image\"></p>\n<p><strong>AFTER</strong>\n<img src=\"https://github.com/ha3158987/hyuna-next.js-blog/assets/65105537/3c8b6eb7-165d-47ef-84ad-d0243bb7b8f9\" alt=\"image\"></p>\n</li>\n</ul>\n<h2>ğŸ” ë°°ê²½: ì–´ë–»ê²Œ ëœ ê±°ëƒë©´...</h2>\n<p>Heath Score ê°€ 100ì ì—ì„œ 34ì ìœ¼ë¡œ ë–¨ì–´ì¡Œë˜ ê·¸ ì‚¬ì´ ê¸°ê°„ì— ë°˜ì˜ë˜ì—ˆë˜ ëª¨ë“  ë³€ê²½ì‚¬í•­ì„ ì¶”ì í•´ë³´ë‹ˆ ì›ì¸ì´ ì•„ë˜ì™€ ê°™ì´ ì¢í˜€ì¡Œë‹¤:</p>\n<ul>\n<li>í˜ì´ì§€ í¼í¬ë¨¼ìŠ¤ë¥¼ ê°œì„  / Lazy Loadingì„ ì ìš©í•˜ê¸° ìœ„í•´ Suspenseë¥¼ Layoutì— ì¶”ê°€ (ì¶”í›„ ì´ê²ƒ ë˜í•œ ì¢€ ë” ì§€ì—­ì ìœ¼ë¡œ ì¶”ê°€í–ˆì–´ì•¼ í–ˆìŒì„ ì•Œê²Œ ë˜ì—ˆë‹¤ğŸ¥²)</li>\n<li>ê°œë°œí™˜ê²½ì—ì„œ Next.js hydration ì—ëŸ¬ ëŒ€ê±° ë°œìƒ</li>\n<li>hydration ì—ëŸ¬ í”½ìŠ¤ë¥¼ ìœ„í•´ mount ì‹œì ì„ stateë¡œ ë°˜í™˜í•´ì£¼ëŠ” <code>useMounted()</code>ë¼ëŠ” ì»¤ìŠ¤í…€ í›…ì„ ë§Œë“¤ì–´ <code>_app.tsx</code>ì— ë°˜ì˜í•´ë‘ . ê·¸ë¦¬ê³  <code>_app.tsx</code>ì—ëŠ” í—¤ë”ì— og meta íƒœê·¸ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ì½”ë“œê°€ ìˆì—ˆë˜ ê²ƒ!</li>\n</ul>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// useMounted.ts</span>\n\n<span class=\"hljs-keyword\">import</span> { useEffect, useState } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">useMounted</span> = (<span class=\"hljs-params\"></span>) => {\n  <span class=\"hljs-keyword\">const</span> [isMounted, setIsMounted] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-literal\">false</span>);\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =></span> {\n    <span class=\"hljs-title function_\">setIsMounted</span>(<span class=\"hljs-literal\">true</span>);\n  }, []);\n\n  <span class=\"hljs-keyword\">return</span> isMounted;\n};\n</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// _app.tsx</span>\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">App</span>(<span class=\"hljs-params\">{ Component, pageProps }: AppProps</span>) {\n  <span class=\"hljs-keyword\">const</span> isMounted = <span class=\"hljs-title function_\">useMounted</span>();\n\n (... ìƒëµ)\n\n  <span class=\"hljs-comment\">// local storageë¡œ ì¸í•œ hydration error handling</span>\n  <span class=\"hljs-keyword\">if</span> (!isMounted) <span class=\"hljs-keyword\">return</span> <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;></span><span class=\"hljs-tag\">&#x3C;/></span></span>;\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Providers</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Layout</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">OGMetas</span> /></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Component</span> {<span class=\"hljs-attr\">...pageProps</span>} <span class=\"hljs-attr\">key</span>=<span class=\"hljs-string\">{router.asPath}</span> /></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">CookieConsentBanner</span> /></span>\n      <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">Layout</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">OverlayLayout</span>></span>{useVersionInfo &#x26;&#x26; <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">VersionInfoOverlay</span> /></span>}<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">OverlayLayout</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">OverlayBanner</span> /></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">Providers</span>></span></span>\n  );\n}\n\n</code></pre>\n<h2>ğŸ©º í•´ê²°ë°©ë²•: ê³ ì³ë³´ì!</h2>\n<ul>\n<li>\n<p>ì›ì¸ì´ ì¢í˜€ì¡Œê¸° ë•Œë¬¸ì— <code>_app.tsx</code>ì— ìˆë˜ <code>useMounted()</code> hookê³¼ <code>isMounted</code>ì— ì˜ì¡´í•˜ë˜ ë¶€ë¶„ì„ ì œê±°í–ˆë‹¤.</p>\n</li>\n<li>\n<p>ê·¸ë¦¬ê³  POSTMANì—ì„œ localhost:3000ìœ¼ë¡œ GETì„ ìš”ì²­í•´ì„œ ë¦¬í„´ë°›ëŠ” HTMLì„ ë¹„êµí•´ë³´ì•˜ë‹¤. ì œê±° ì „ / í›„ <code>&#x3C;head></code>ì˜ og meta íƒœê·¸ì—ì„œ í™•ì—°í•œ ì°¨ì´ê°€ ìˆì—ˆë‹¤:</p>\n<p><strong>BEFORE</strong></p>\n<p><img src=\"https://github.com/ha3158987/hyuna-next.js-blog/assets/65105537/5952a859-9ea4-46dd-b1e7-8750e9839c9e\" alt=\"image\"></p>\n<p><strong>AFTER</strong></p>\n<p><img src=\"https://github.com/ha3158987/hyuna-next.js-blog/assets/65105537/f15c7626-1629-4ff9-95e9-bca218f72f5a\" alt=\"image\"></p>\n<ul>\n<li>ì´ì „ì—ëŠ” ë³´ì´ì§€ ì•Šë˜ ë©”íƒ€íƒœê·¸ë“¤ì´ <code>useMounted()</code> ì œê±° í›„ í™•ì‹¤í•˜ê²Œ ë³´ì—¬ì§€ê¸° ì‹œì‘í–ˆë‹¤!</li>\n</ul>\n</li>\n<li>\n<p>ì ìš© í›„ì— Health Scoreë„ ì´ì „ì²˜ëŸ¼ ëŒì•„ì˜¨ ê±¸ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤:</p>\n<p><strong>BEFORE</strong></p>\n<p><img src=\"https://github.com/ha3158987/hyuna-next.js-blog/assets/65105537/f4bc3bce-d34b-43ce-a8f1-909abfa1f163\" alt=\"image\"></p>\n<p><strong>AFTER</strong></p>\n<p><img src=\"https://github.com/ha3158987/hyuna-next.js-blog/assets/65105537/d720adf8-391d-4d14-9fbf-2dd0281f6595\" alt=\"image\"></p>\n</li>\n</ul>\n<h2>ğŸ’¡ ì˜¤ëŠ˜ì˜ êµí›ˆ: Next.jsì˜ pre-renderingì„ ë§‰ì§€ ë§ ê²ƒ (WIP)</h2>\n<ul>\n<li>ë¶€ë„ëŸ½ì§€ë§Œ ì´ë²ˆ ì¼ì€ Next.jsì˜ ë™ì‘ë°©ì‹ì„ ì œëŒ€ë¡œ ì´í•´í•˜ì§€ ëª»í•˜ê³  ëˆˆì•ì˜ ì—ëŸ¬ë§Œ í•´ê²°í•˜ë ¤ë‹¤ ì¼ì–´ë‚œ ì¼ì´ì—ˆë‹¤.</li>\n<li>\"Next.jsê°€ SEO íŠ¹í™”ë˜ì–´ ìˆë‹¤\"ë¼ëŠ” ê±´ ê³µì‹ì²˜ëŸ¼ ì™¸ìš°ê³  ìˆìœ¼ë©´ì„œë„ pre-renderingìœ¼ë¡œ ìƒì„±í•˜ê³  ìˆë˜ ê±¸ ë§ˆìš´íŠ¸ ì´í›„ ì‹œì ì— ìƒì„±í•˜ë„ë¡ ë°”ê¾¸ë©´ SEOì— ì˜í–¥ì„ ì¤„ ìˆ˜ë°–ì— ì—†ë‹¤ëŠ” ì‚¬ì‹¤ì„ ê°„ê³¼í–ˆì—ˆë‹¤. ë§ˆì¹˜ SSRì—ê²Œ CSRê³¼ ê°™ì´ ë™ì‘í•˜ë¼ê³  ì£¼ë¬¸í•œ í›„ì— \"ì•„ë‹ˆ, ì™œ ë¼ˆëŒ€ë¥¼ ì•ˆë§Œë“¤ì—ˆì–´?\" ë¼ê³  ë¬¼ì€ ê²©.</li>\n<li>ì¦‰, pre-renderingì„ ì„ì˜ë¡œ ì¡°ì •í•´ì„œê¹Œì§€ ë Œë”ë§ ìˆœì„œë¥¼ ì œì–´í•´ì•¼í•œë‹¤ë©´, SSR ë°©ì‹ì´ ì ì ˆí•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.</li>\n<li>ê·¸ë˜ì„œ ê°œë°œí™˜ê²½ì—ì„œ ë‚˜ë˜ hydration ì—ëŸ¬ëŠ” ì–´ë–»ê²Œ í”½ìŠ¤í–ˆëŠ” ì§€!? ëŠ” <strong>to be continued</strong>...</li>\n</ul>\n<h2>ğŸ“š Reference</h2>\n<p><a href=\"https://velog.io/@kykim/Next.js-%EA%B3%B5%EC%9C%A0-%EB%AF%B8%EB%A6%AC%EB%B3%B4%EA%B8%B0-%EC%98%A4%EB%A5%98-CSR-SSR\">https://velog.io/@kykim/Next.js-ê³µìœ -ë¯¸ë¦¬ë³´ê¸°-ì˜¤ë¥˜-CSR-SSR</a></p>\n","title":"Next.jsë¡œ ì„œë¹„ìŠ¤ ìš´ì˜í•˜ë©° ìƒê¸´ ì¼ ep.1: Hydration ì—ëŸ¬ í•´ê²°í•˜ë ¤ë‹¤...","date":"2024-05-31"}},"__N_SSG":true}