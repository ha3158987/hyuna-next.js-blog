---
title: "Next.jsë¡œ ìš´ì˜ì„ í•˜ë©´ ìƒê¸°ëŠ” ì¼ ep.1: SSRì—ì„œ ë§ˆìš´íŠ¸ ìˆœì„œë¥¼ ì œì–´í•˜ë©´ ì•ˆë˜ëŠ” ì´ìœ "
date: "2024-05-31"
---

## ğŸš¨ ë¬¸ì œìƒí™©

- 100ìœ¼ë¡œ ì˜¬ë ¤ë‘ì—ˆë˜ Heath Scoreê°€ ì–´ëŠ ìƒˆ 34ì ìœ¼ë¡œ ëš ë–¨ì–´ì ¸ë²„ë ¸ë‹¤ <br>

![image](https://github.com/ha3158987/hyuna-next.js-blog/assets/65105537/f4bc3bce-d34b-43ce-a8f1-909abfa1f163)

- ì„¤ìƒê°€ìƒìœ¼ë¡œ ìŠ¬ë™ ë“± ê¸°íƒ€ í”Œë«í¼ì—ì„œ ë§í¬ ê³µìœ  ì‹œ ë‚˜ì˜¤ë˜ ë©”íƒ€ ì •ë³´ë„ ì–¸ì œë¶€í„°ì¸ê°€ ë³´ì´ì§ˆ ì•Šê³  ìˆì—ˆë‹¤...<br>

| BEFORE                                                                                                         | AFTER                                                                                                          |
| -------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------- |
| ![image](https://github.com/ha3158987/hyuna-next.js-blog/assets/65105537/cefe4d92-a0f2-4f3e-8d94-f1fa78c0ac8a) | ![image](https://github.com/ha3158987/hyuna-next.js-blog/assets/65105537/3c8b6eb7-165d-47ef-84ad-d0243bb7b8f9) |

## ğŸ” ë°°ê²½: ì–´ë–»ê²Œ ëœ ê±°ëƒë©´...

Heath Score ê°€ 100ì ì—ì„œ 34ì ìœ¼ë¡œ ë–¨ì–´ì¡Œë˜ ê·¸ ì‚¬ì´ ê¸°ê°„ì— ë°˜ì˜ë˜ì—ˆë˜ ëª¨ë“  ë³€ê²½ì‚¬í•­ì„ ì¶”ì í•´ë³´ë‹ˆ ì›ì¸ì´ ì•„ë˜ì™€ ê°™ì´ ì¢í˜€ì¡Œë‹¤:

- í˜ì´ì§€ í¼í¬ë¨¼ìŠ¤ë¥¼ ê°œì„  / Lazy Loadingì„ ì ìš©í•˜ê¸° ìœ„í•´ Suspenseë¥¼ Layoutì— ì¶”ê°€ (ì¶”í›„ ì´ê²ƒ ë˜í•œ ì¢€ ë” ì§€ì—­ì ìœ¼ë¡œ ì¶”ê°€í–ˆì–´ì•¼ í–ˆìŒì„ ì•Œê²Œ ë˜ì—ˆë‹¤ğŸ¥²)
- ê°œë°œí™˜ê²½ì—ì„œ Next.js hydration ì—ëŸ¬ ëŒ€ê±° ë°œìƒ
- hydration ì—ëŸ¬ í”½ìŠ¤ë¥¼ ìœ„í•´ mount ì‹œì ì„ stateë¡œ ë°˜í™˜í•´ì£¼ëŠ” `useMounted()`ë¼ëŠ” ì»¤ìŠ¤í…€ í›…ì„ ë§Œë“¤ì–´ `_app.tsx`ì— ë°˜ì˜í•´ë‘ . ê·¸ë¦¬ê³  `_app.tsx`ì—ëŠ” í—¤ë”ì— og meta íƒœê·¸ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ì½”ë“œê°€ ìˆì—ˆë˜ ê²ƒ!

```jsx
// useMounted.ts

import { useEffect, useState } from "react";

export const useMounted = () => {
  const [isMounted, setIsMounted] = useState(false);

  useEffect(() => {
    setIsMounted(true);
  }, []);

  return isMounted;
};
```

```jsx
// _app.tsx

function App({ Component, pageProps }: AppProps) {
  const isMounted = useMounted();

 (... ìƒëµ)

  // local storageë¡œ ì¸í•œ hydration error handling
  if (!isMounted) return <></>;

  return (
    <Providers>
      <Layout>
        <OGMetas />
        <Component {...pageProps} key={router.asPath} />
        <CookieConsentBanner />
      </Layout>
      <OverlayLayout>{useVersionInfo && <VersionInfoOverlay />}</OverlayLayout>
      <OverlayBanner />
    </Providers>
  );
}

```

## ğŸ©º í•´ê²°ë°©ë²•: ê³ ì³ë³´ì!

- ì›ì¸ì´ ì¢í˜€ì¡Œê¸° ë•Œë¬¸ì— `_app.tsx`ì— ìˆë˜ `useMounted()` hookê³¼ `isMounted`ì— ì˜ì¡´í•˜ë˜ ë¶€ë¶„ì„ ì œê±°í–ˆë‹¤.
- ê·¸ë¦¬ê³  POSTMANì—ì„œ localhost:3000ìœ¼ë¡œ GETì„ ìš”ì²­í•´ì„œ ë¦¬í„´ë°›ëŠ” HTMLì„ ë¹„êµí•´ë³´ì•˜ë‹¤. ì œê±° ì „ / í›„ `<head>`ì˜ og meta íƒœê·¸ì—ì„œ í™•ì—°í•œ ì°¨ì´ê°€ ìˆì—ˆë‹¤:
  | BEFORE | AFTER |
  | -------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------- |
  | ![image](https://github.com/ha3158987/hyuna-next.js-blog/assets/65105537/5952a859-9ea4-46dd-b1e7-8750e9839c9e) | ![image](https://github.com/ha3158987/hyuna-next.js-blog/assets/65105537/f15c7626-1629-4ff9-95e9-bca218f72f5a) |

  - ì´ì „ì—ëŠ” ë³´ì´ì§€ ì•Šë˜ ë©”íƒ€íƒœê·¸ë“¤ì´ `useMounted()` ì œê±° í›„ í™•ì‹¤í•˜ê²Œ ë³´ì—¬ì§€ê¸° ì‹œì‘í–ˆë‹¤!

- ì ìš© í›„ì— Health Scoreë„ ì´ì „ì²˜ëŸ¼ ëŒì•„ì˜¨ ê±¸ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤:
  | BEFORE | AFTER |
  | -------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------- |
  |![image](https://github.com/ha3158987/hyuna-next.js-blog/assets/65105537/f4bc3bce-d34b-43ce-a8f1-909abfa1f163)|![image](https://github.com/ha3158987/hyuna-next.js-blog/assets/65105537/d720adf8-391d-4d14-9fbf-2dd0281f6595)|

## ğŸ’¡ ì˜¤ëŠ˜ì˜ êµí›ˆ: Next.jsì˜ pre-renderingì„ ë§‰ì§€ ë§ ê²ƒ (WIP)

- ë¶€ë„ëŸ½ì§€ë§Œ ì´ë²ˆ ì¼ì€ Next.jsì˜ ë™ì‘ë°©ì‹ì„ ì œëŒ€ë¡œ ì´í•´í•˜ì§€ ëª»í•˜ê³  ëˆˆì•ì˜ ì—ëŸ¬ë§Œ í•´ê²°í•˜ë ¤ë‹¤ ì¼ì–´ë‚œ ì¼ì´ì—ˆë‹¤.
- "Next.jsê°€ SEO íŠ¹í™”ë˜ì–´ ìˆë‹¤"ë¼ëŠ” ê±´ ê³µì‹ì²˜ëŸ¼ ì™¸ìš°ê³  ìˆìœ¼ë©´ì„œë„ pre-renderingìœ¼ë¡œ ìƒì„±í•˜ê³  ìˆë˜ ê±¸ ë§ˆìš´íŠ¸ ì´í›„ ì‹œì ì— ìƒì„±í•˜ë„ë¡ ë°”ê¾¸ë©´ SEOì— ì˜í–¥ì„ ì¤„ ìˆ˜ë°–ì— ì—†ë‹¤ëŠ” ì‚¬ì‹¤ì„ ê°„ê³¼í–ˆì—ˆë‹¤. ë§ˆì¹˜ SSRì—ê²Œ CSRê³¼ ê°™ì´ ë™ì‘í•˜ë¼ê³  ì£¼ë¬¸í•œ ê²©.
- ì¦‰, pre-renderingì„ ì„ì˜ë¡œ ì¡°ì •í•´ì„œê¹Œì§€ ë Œë”ë§ ìˆœì„œë¥¼ ì œì–´í•´ì•¼í•œë‹¤ë©´, SSR ë°©ì‹ì´ ì ì ˆí•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.
- ê·¸ë˜ì„œ ê°œë°œí™˜ê²½ì—ì„œ ë‚˜ë˜ hydration ì—ëŸ¬ëŠ” ì–´ë–»ê²Œ í”½ìŠ¤í–ˆëŠ” ì§€!? ëŠ” **to be continued**...

## ğŸ“š Reference

[https://velog.io/@kykim/Next.js-ê³µìœ -ë¯¸ë¦¬ë³´ê¸°-ì˜¤ë¥˜-CSR-SSR](https://velog.io/@kykim/Next.js-%EA%B3%B5%EC%9C%A0-%EB%AF%B8%EB%A6%AC%EB%B3%B4%EA%B8%B0-%EC%98%A4%EB%A5%98-CSR-SSR)
